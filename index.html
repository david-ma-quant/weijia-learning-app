<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å”¯å˜‰çš„å­¦ä¹ ç©ºé—´ ğŸŒ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Nunito', -apple-system, BlinkMacSystemFont, sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-gradient { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); }
        .pink-gradient { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .blue-gradient { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); }
        .green-gradient { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
        .orange-gradient { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
        .purple-gradient { background: linear-gradient(135deg, #a18cd1 0%, #fbc2eb 100%); }
        .bounce-in { animation: bounceIn 0.5s ease-out; }
        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            50% { transform: scale(1.05); }
            70% { transform: scale(0.9); }
            100% { transform: scale(1); opacity: 1; }
        }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
        .current-week { border: 3px solid #f59e0b; box-shadow: 0 0 20px rgba(245, 158, 11, 0.3); }
        .tab-active { background: white; color: #7c3aed; }
        .homework-card { border-left: 4px solid #8b5cf6; }
    </style>
</head>
<body class="min-h-screen gradient-bg">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <header class="text-center mb-8 bounce-in">
            <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-2">
                ğŸŒ¸ å”¯å˜‰çš„å­¦ä¹ ç©ºé—´ ğŸŒ¸
            </h1>
            <p class="text-white/80 text-lg">æ¯å¤©è¿›æ­¥ä¸€ç‚¹ç‚¹ ğŸŒ±</p>
        </header>

        <!-- Navigation Tabs -->
        <div class="flex justify-center mb-6">
            <div class="bg-white/20 backdrop-blur rounded-full p-1 flex gap-1">
                <button onclick="showTab('main')" id="tab-main" class="px-4 py-2 rounded-full font-bold transition-all tab-active">ğŸ“Š ä¸»é¡µ</button>
                <button onclick="showTab('homework')" id="tab-homework" class="px-4 py-2 rounded-full font-bold transition-all text-white hover:bg-white/20">ğŸ“š ä½œä¸š</button>
                <button onclick="showTab('review')" id="tab-review" class="px-4 py-2 rounded-full font-bold transition-all text-white hover:bg-white/20">ğŸ“– å¤ä¹ </button>
            </div>
        </div>

        <!-- Main Tab -->
        <div id="content-main">
            <!-- Progress Dashboard -->
            <div class="bg-white/95 backdrop-blur rounded-3xl p-6 mb-6 shadow-2xl bounce-in">
                <h2 class="text-2xl font-bold text-purple-600 mb-4 flex items-center">
                    ğŸ“Š æˆ‘çš„è¿›åº¦
                </h2>
                <div class="grid grid-cols-3 gap-4 text-center">
                    <div class="pink-gradient rounded-2xl p-4 text-white">
                        <div class="text-3xl font-bold" id="streak">0</div>
                        <div class="text-sm opacity-90">ğŸ”¥ è¿ç»­å¤©æ•°</div>
                    </div>
                    <div class="blue-gradient rounded-2xl p-4 text-white">
                        <div class="text-3xl font-bold" id="challenges">0</div>
                        <div class="text-sm opacity-90">âœ… æŒ‘æˆ˜å®Œæˆ</div>
                    </div>
                    <div class="green-gradient rounded-2xl p-4 text-white">
                        <div class="text-3xl font-bold" id="homeworkCount">0</div>
                        <div class="text-sm opacity-90">ğŸ“ ä½œä¸šå®Œæˆ</div>
                    </div>
                </div>
            </div>

            <!-- Weekly AI Challenges -->
            <div class="bg-white/95 backdrop-blur rounded-3xl p-6 mb-6 shadow-2xl">
                <h2 class="text-2xl font-bold text-purple-600 mb-4 flex items-center">
                    ğŸ¯ æ¯å‘¨è‹±æ–‡ AI æŒ‘æˆ˜
                </h2>
                <p class="text-gray-500 mb-4 text-sm">ç”¨è‹±æ–‡å’Œ AI å¯¹è¯ï¼Œå®ŒæˆæŒ‘æˆ˜åæ‰“å‹¾ âœ“</p>
                <div class="space-y-3" id="challengeList">
                    <!-- Challenges will be inserted here -->
                </div>
            </div>

            <!-- Question of the Day -->
            <div class="bg-white/95 backdrop-blur rounded-3xl p-6 mb-6 shadow-2xl">
                <h2 class="text-2xl font-bold text-purple-600 mb-4 flex items-center">
                    ğŸ’¡ ä»Šæ—¥å¥½é—®é¢˜
                </h2>
                <p class="text-gray-500 mb-3 text-sm">å¥½é—®é¢˜æ¯”å¥½ç­”æ¡ˆæ›´é‡è¦ï¼è¯•ç€é—® "ä¸ºä»€ä¹ˆ...ï¼Ÿ" "å¦‚æœ...ä¼šæ€æ ·ï¼Ÿ" "æ€ä¹ˆæ‰èƒ½...ï¼Ÿ"</p>
                <div class="bg-purple-50 rounded-xl p-4 mb-4">
                    <p class="text-purple-700 font-semibold mb-2">ğŸ’­ å¥½é—®é¢˜ç¤ºä¾‹ï¼š</p>
                    <ul class="text-purple-600 text-sm space-y-1">
                        <li>â€¢ ä¸ºä»€ä¹ˆå¤©ç©ºæ˜¯è“è‰²çš„ï¼Ÿ</li>
                        <li>â€¢ å¦‚æœåœ°çƒåœæ­¢è½¬åŠ¨ä¼šæ€æ ·ï¼Ÿ</li>
                        <li>â€¢ æ€ä¹ˆæ‰èƒ½è®© AI ç”»å‡ºæ›´å¥½çœ‹çš„å›¾ï¼Ÿ</li>
                    </ul>
                </div>
                <textarea 
                    id="dailyQuestion" 
                    class="w-full p-4 border-2 border-purple-200 rounded-xl focus:border-purple-400 focus:outline-none resize-none"
                    rows="3"
                    placeholder="å†™ä¸‹ä½ ä»Šå¤©çš„å¥½é—®é¢˜..."></textarea>
                <button onclick="saveQuestion()" class="mt-3 w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-[1.02]">
                    ä¿å­˜é—®é¢˜ ğŸ’¾
                </button>
                <div id="questionHistory" class="mt-4 space-y-2"></div>
            </div>

            <!-- Teach Back Section -->
            <div class="bg-white/95 backdrop-blur rounded-3xl p-6 mb-6 shadow-2xl">
                <h2 class="text-2xl font-bold text-purple-600 mb-4 flex items-center">
                    ğŸ‘©â€ğŸ« å°è€å¸ˆæ—¶é—´
                </h2>
                <p class="text-gray-500 mb-4 text-sm">ç”¨ä½ è‡ªå·±çš„è¯æ•™ç»™åˆ«äºº â€”â€” è¿™æ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼ï¼</p>
                <div class="bg-orange-50 rounded-xl p-4 mb-4">
                    <p class="text-orange-700">ğŸ¬ å¯ä»¥å½•ä¸€æ®µ 2 åˆ†é’Ÿçš„è§†é¢‘ï¼Œæ•™åˆ«äººä½ ä»Šå¤©å­¦åˆ°çš„ä¸œè¥¿ï¼</p>
                </div>
                <textarea 
                    id="teachBack" 
                    class="w-full p-4 border-2 border-orange-200 rounded-xl focus:border-orange-400 focus:outline-none resize-none"
                    rows="4"
                    placeholder="ä»Šå¤©æˆ‘å­¦åˆ°äº†...æˆ‘æƒ³è¿™æ ·è§£é‡Šç»™åˆ«äººå¬..."></textarea>
                <button onclick="saveTeachBack()" class="mt-3 w-full bg-orange-400 hover:bg-orange-500 text-white font-bold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-[1.02]">
                    ä¿å­˜å­¦ä¹ ç¬”è®° ğŸ“
                </button>
            </div>

            <!-- AI Tools Recommendations (China-accessible) -->
            <div class="bg-white/95 backdrop-blur rounded-3xl p-6 mb-6 shadow-2xl">
                <h2 class="text-2xl font-bold text-purple-600 mb-4 flex items-center">
                    ğŸ› ï¸ AI å·¥å…·æ¨èï¼ˆå›½å†…å¯ç”¨ï¼‰
                </h2>
                <p class="text-gray-500 mb-4 text-sm">â­ = ç®€å•å…¥é—¨ ï½œ â­â­ = ç¨æœ‰éš¾åº¦</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                    <a href="https://chat.deepseek.com" target="_blank" class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 card-hover transition-all duration-300 cursor-pointer border border-blue-100 block no-underline">
                        <div class="flex justify-between items-center">
                            <span class="font-bold text-blue-700">ğŸ”® DeepSeek</span>
                            <span class="text-yellow-500">â­</span>
                        </div>
                        <p class="text-blue-600 text-sm mt-1">å¼ºå¤§çš„ AI å¯¹è¯åŠ©æ‰‹ï¼Œå…è´¹å¥½ç”¨</p>
                    </a>
                    <a href="https://www.doubao.com" target="_blank" class="bg-gradient-to-r from-orange-50 to-amber-50 rounded-xl p-4 card-hover transition-all duration-300 cursor-pointer border border-orange-100 block no-underline">
                        <div class="flex justify-between items-center">
                            <span class="font-bold text-orange-700">ğŸ«› è±†åŒ…</span>
                            <span class="text-yellow-500">â­</span>
                        </div>
                        <p class="text-orange-600 text-sm mt-1">å­—èŠ‚è·³åŠ¨å‡ºå“ï¼ŒèŠå¤©å†™ä½œéƒ½å¾ˆæ£’</p>
                    </a>
                    <a href="https://kimi.moonshot.cn" target="_blank" class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 card-hover transition-all duration-300 cursor-pointer border border-purple-100 block no-underline">
                        <div class="flex justify-between items-center">
                            <span class="font-bold text-purple-700">ğŸŒ™ Kimi</span>
                            <span class="text-yellow-500">â­</span>
                        </div>
                        <p class="text-purple-600 text-sm mt-1">è¶…é•¿æ–‡æœ¬å¤„ç†ï¼Œè¯»æ–‡ç« è¶…å‰å®³</p>
                    </a>
                    <a href="https://yiyan.baidu.com" target="_blank" class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 card-hover transition-all duration-300 cursor-pointer border border-green-100 block no-underline">
                        <div class="flex justify-between items-center">
                            <span class="font-bold text-green-700">ğŸ’¬ æ–‡å¿ƒä¸€è¨€</span>
                            <span class="text-yellow-500">â­</span>
                        </div>
                        <p class="text-green-600 text-sm mt-1">ç™¾åº¦å‡ºå“ï¼Œä¸­æ–‡ç†è§£å¾ˆå¼º</p>
                    </a>
                    <a href="https://tongyi.aliyun.com" target="_blank" class="bg-gradient-to-r from-red-50 to-orange-50 rounded-xl p-4 card-hover transition-all duration-300 cursor-pointer border border-red-100 block no-underline">
                        <div class="flex justify-between items-center">
                            <span class="font-bold text-red-700">ğŸ§  é€šä¹‰åƒé—®</span>
                            <span class="text-yellow-500">â­</span>
                        </div>
                        <p class="text-red-600 text-sm mt-1">é˜¿é‡Œå‡ºå“ï¼ŒåŠŸèƒ½å…¨é¢</p>
                    </a>
                    <a href="https://www.tiangong.cn" target="_blank" class="bg-gradient-to-r from-cyan-50 to-blue-50 rounded-xl p-4 card-hover transition-all duration-300 cursor-pointer border border-cyan-100 block no-underline">
                        <div class="flex justify-between items-center">
                            <span class="font-bold text-cyan-700">ğŸ¨ å¤©å·¥ AI</span>
                            <span class="text-yellow-500">â­â­</span>
                        </div>
                        <p class="text-cyan-600 text-sm mt-1">å¯ä»¥ç”»ç”»å’Œåˆ›ä½œ</p>
                    </a>
                </div>
            </div>
        </div>

        <!-- Homework Tab -->
        <div id="content-homework" class="hidden">
            <!-- Add Homework -->
            <div class="bg-white/95 backdrop-blur rounded-3xl p-6 mb-6 shadow-2xl">
                <h2 class="text-2xl font-bold text-purple-600 mb-4">ğŸ“ æ·»åŠ æ–°ä½œä¸š</h2>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-600 mb-2 font-semibold">ç§‘ç›®</label>
                        <select id="hwSubject" class="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-400 focus:outline-none">
                            <option value="è¯­æ–‡">ğŸ“– è¯­æ–‡</option>
                            <option value="æ•°å­¦">ğŸ”¢ æ•°å­¦</option>
                            <option value="è‹±è¯­">ğŸ”¤ è‹±è¯­</option>
                            <option value="ç‰©ç†">âš¡ ç‰©ç†</option>
                            <option value="åŒ–å­¦">ğŸ§ª åŒ–å­¦</option>
                            <option value="ç”Ÿç‰©">ğŸŒ¿ ç”Ÿç‰©</option>
                            <option value="å†å²">ğŸ“œ å†å²</option>
                            <option value="åœ°ç†">ğŸŒ åœ°ç†</option>
                            <option value="æ”¿æ²»">ğŸ“‹ æ”¿æ²»</option>
                            <option value="å…¶ä»–">ğŸ“Œ å…¶ä»–</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-600 mb-2 font-semibold">ä½œä¸šå†…å®¹</label>
                        <textarea 
                            id="hwContent" 
                            class="w-full p-4 border-2 border-purple-200 rounded-xl focus:border-purple-400 focus:outline-none resize-none"
                            rows="3"
                            placeholder="æè¿°ä½œä¸šå†…å®¹..."></textarea>
                    </div>
                    <div>
                        <label class="block text-gray-600 mb-2 font-semibold">æˆªæ­¢æ—¥æœŸ</label>
                        <input type="date" id="hwDueDate" class="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-400 focus:outline-none">
                    </div>
                    <button onclick="addHomework()" class="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-6 rounded-xl transition-all duration-200 transform hover:scale-[1.02]">
                        æ·»åŠ ä½œä¸š â•
                    </button>
                </div>
            </div>

            <!-- Pending Homework -->
            <div class="bg-white/95 backdrop-blur rounded-3xl p-6 mb-6 shadow-2xl">
                <h2 class="text-2xl font-bold text-purple-600 mb-4">ğŸ“‹ å¾…å®Œæˆä½œä¸š</h2>
                <div id="pendingHomework" class="space-y-3">
                    <p class="text-gray-400 text-center py-8">æš‚æ— å¾…å®Œæˆä½œä¸š âœ¨</p>
                </div>
            </div>

            <!-- AI Homework Helper -->
            <div class="bg-white/95 backdrop-blur rounded-3xl p-6 mb-6 shadow-2xl">
                <h2 class="text-2xl font-bold text-purple-600 mb-4">ğŸ¤– AI ä½œä¸šåŠ©æ‰‹</h2>
                <p class="text-gray-500 mb-4 text-sm">é‡åˆ°ä¸ä¼šçš„é¢˜ç›®ï¼Ÿå¤åˆ¶é¢˜ç›®åˆ°ä¸‹é¢çš„ AI å·¥å…·å¯»æ±‚å¸®åŠ©ï¼</p>
                <div class="bg-blue-50 rounded-xl p-4 mb-4">
                    <p class="text-blue-700 font-semibold mb-2">ğŸ’¡ ä½¿ç”¨æŠ€å·§ï¼š</p>
                    <ul class="text-blue-600 text-sm space-y-1">
                        <li>â€¢ å…ˆè‡ªå·±æ€è€ƒï¼Œä¸ä¼šå†é—® AI</li>
                        <li>â€¢ è®© AI è§£é‡Šæ€è·¯ï¼Œä¸è¦ç›´æ¥æŠ„ç­”æ¡ˆ</li>
                        <li>â€¢ ç”¨è‹±æ–‡é—®é¢˜ç»ƒä¹ è‹±è¯­ï¼</li>
                    </ul>
                </div>
                <div class="grid grid-cols-2 gap-3">
                    <a href="https://chat.deepseek.com" target="_blank" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-xl text-center transition-all">
                        ğŸ”® é—® DeepSeek
                    </a>
                    <a href="https://www.doubao.com" target="_blank" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-xl text-center transition-all">
                        ğŸ«› é—®è±†åŒ…
                    </a>
                    <a href="https://kimi.moonshot.cn" target="_blank" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-4 rounded-xl text-center transition-all">
                        ğŸŒ™ é—® Kimi
                    </a>
                    <a href="https://yiyan.baidu.com" target="_blank" class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-xl text-center transition-all">
                        ğŸ’¬ é—®æ–‡å¿ƒä¸€è¨€
                    </a>
                </div>
            </div>
        </div>

        <!-- Review Tab -->
        <div id="content-review" class="hidden">
            <div class="bg-white/95 backdrop-blur rounded-3xl p-6 mb-6 shadow-2xl">
                <h2 class="text-2xl font-bold text-purple-600 mb-4">ğŸ“– è€ƒè¯•å¤ä¹ </h2>
                <p class="text-gray-500 mb-4">é€‰æ‹©ç§‘ç›®æŸ¥çœ‹å†å²ä½œä¸šï¼Œå¸®åŠ©ä½ å¤ä¹ ï¼</p>
                
                <div class="mb-4">
                    <label class="block text-gray-600 mb-2 font-semibold">é€‰æ‹©ç§‘ç›®</label>
                    <select id="reviewSubject" onchange="filterReview()" class="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-400 focus:outline-none">
                        <option value="all">ğŸ“š å…¨éƒ¨ç§‘ç›®</option>
                        <option value="è¯­æ–‡">ğŸ“– è¯­æ–‡</option>
                        <option value="æ•°å­¦">ğŸ”¢ æ•°å­¦</option>
                        <option value="è‹±è¯­">ğŸ”¤ è‹±è¯­</option>
                        <option value="ç‰©ç†">âš¡ ç‰©ç†</option>
                        <option value="åŒ–å­¦">ğŸ§ª åŒ–å­¦</option>
                        <option value="ç”Ÿç‰©">ğŸŒ¿ ç”Ÿç‰©</option>
                        <option value="å†å²">ğŸ“œ å†å²</option>
                        <option value="åœ°ç†">ğŸŒ åœ°ç†</option>
                        <option value="æ”¿æ²»">ğŸ“‹ æ”¿æ²»</option>
                    </select>
                </div>

                <div id="reviewList" class="space-y-3">
                    <p class="text-gray-400 text-center py-8">å®Œæˆä½œä¸šåè¿™é‡Œä¼šæ˜¾ç¤ºå†å²è®°å½• ğŸ“</p>
                </div>
            </div>

            <!-- AI Review Helper -->
            <div class="bg-white/95 backdrop-blur rounded-3xl p-6 mb-6 shadow-2xl">
                <h2 class="text-2xl font-bold text-purple-600 mb-4">ğŸ¯ AI å¤ä¹ åŠ©æ‰‹</h2>
                <div class="bg-green-50 rounded-xl p-4 mb-4">
                    <p class="text-green-700 font-semibold mb-2">ğŸ“ å¤ä¹ å»ºè®®ï¼š</p>
                    <ul class="text-green-600 text-sm space-y-1">
                        <li>â€¢ æŠŠä½œä¸šå†…å®¹å¤åˆ¶ç»™ AIï¼Œè®©å®ƒå‡ºç±»ä¼¼çš„é¢˜ç›®</li>
                        <li>â€¢ è®© AI æ€»ç»“è¿™ä¸ªç« èŠ‚çš„é‡ç‚¹</li>
                        <li>â€¢ è®© AI æ‰®æ¼”è€å¸ˆè€ƒä½ ï¼</li>
                    </ul>
                </div>
                <a href="https://chat.deepseek.com" target="_blank" class="block w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-4 px-6 rounded-xl text-center transition-all duration-200 transform hover:scale-[1.02]">
                    ğŸš€ å¼€å§‹ AI å¤ä¹ 
                </a>
            </div>
        </div>

        <!-- Encouragement -->
        <div class="text-center py-6">
            <div class="inline-block bg-white/20 backdrop-blur rounded-2xl px-8 py-4">
                <p class="text-white text-xl font-bold">ğŸ’ª åŠ æ²¹ï¼ä½ å¯ä»¥çš„ï¼</p>
                <p class="text-white/80 text-sm mt-1">åœ¨ AI æ—¶ä»£ï¼Œä¼šé—®é—®é¢˜çš„äººæ¯”ä¼šç­”é—®é¢˜çš„äººæ›´æœ‰ä»·å€¼ âœ¨</p>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center text-white/60 text-sm pb-8">
            Made with ğŸ’œ by å“¥å“¥ David
        </footer>

        <!-- Settings Modal -->
        <div id="settingsModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
            <div class="bg-white rounded-3xl p-6 m-4 max-w-md w-full">
                <h3 class="text-xl font-bold text-purple-600 mb-4">âš™ï¸ é€šçŸ¥è®¾ç½®</h3>
                <p class="text-gray-500 text-sm mb-4">è®¾ç½® Serveré…± Key åï¼Œå®Œæˆä»»åŠ¡ä¼šé€šçŸ¥å¦ˆå¦ˆ</p>
                <input type="text" id="serverChanKey" placeholder="Serveré…± SendKey" 
                    class="w-full p-3 border-2 border-purple-200 rounded-xl focus:border-purple-400 focus:outline-none mb-4">
                <div class="flex gap-3">
                    <button onclick="saveSettings()" class="flex-1 bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-xl">ä¿å­˜</button>
                    <button onclick="closeSettings()" class="flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-2 px-4 rounded-xl">å–æ¶ˆ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Button -->
    <button onclick="openSettings()" class="fixed bottom-6 right-6 w-14 h-14 bg-white shadow-2xl rounded-full flex items-center justify-center text-2xl hover:scale-110 transition-all">
        âš™ï¸
    </button>

    <script>
        // Serveré…± Key for WeChat notifications
        let serverChanKey = localStorage.getItem('weijia_serverchan') || '';

        // Weekly challenges data
        const challenges = [
            { week: 1, title: "Ask AI to introduce your favorite celebrity", desc: "ç”¨è‹±æ–‡è®© AI ä»‹ç»ä¸€ä¸ªä½ å–œæ¬¢çš„æ˜æ˜Ÿ", completed: false },
            { week: 2, title: "Ask AI to write about é“¶å· (Yinchuan)", desc: "è®© AI å¸®ä½ å†™ä¸€ç¯‡å…³äºé“¶å·çš„è‹±æ–‡ä»‹ç»", completed: false },
            { week: 3, title: "Let AI be your English teacher", desc: "è®© AI å½“ä½ çš„è‹±è¯­è€å¸ˆï¼Œçº æ­£ä½ çš„è¯­æ³•", completed: false },
            { week: 4, title: "Create a video script with AI", desc: "è®© AI å¸®ä½ åšä¸€ä¸ªæ•°å­¦é¢˜çš„è®²è§£è§†é¢‘è„šæœ¬", completed: false },
            { week: 5, title: "Design an app with AI", desc: "è®© AI å¸®ä½ è®¾è®¡ä¸€ä¸ªæ‰‹æœº app çš„åŠŸèƒ½", completed: false },
            { week: 6, title: "Write a letter to future self", desc: "ç”¨è‹±æ–‡è®© AI å¸®ä½ å†™ä¸€å°ä¿¡ç»™æœªæ¥çš„è‡ªå·±", completed: false },
            { week: 7, title: "Create a short story", desc: "å’Œ AI ä¸€èµ·ç”¨è‹±æ–‡åˆ›ä½œä¸€ä¸ªå°æ•…äº‹", completed: false },
            { week: 8, title: "Debate with AI", desc: "é€‰ä¸€ä¸ªè¯é¢˜ï¼Œç”¨è‹±æ–‡å’Œ AI è¿›è¡Œè¾©è®º", completed: false },
        ];

        // Current week (you can adjust this)
        const currentWeek = 1;

        // Tab switching
        function showTab(tab) {
            ['main', 'homework', 'review'].forEach(t => {
                document.getElementById('content-' + t).classList.add('hidden');
                document.getElementById('tab-' + t).classList.remove('tab-active');
                document.getElementById('tab-' + t).classList.add('text-white');
            });
            document.getElementById('content-' + tab).classList.remove('hidden');
            document.getElementById('tab-' + tab).classList.add('tab-active');
            document.getElementById('tab-' + tab).classList.remove('text-white');
            
            if (tab === 'homework') renderHomework();
            if (tab === 'review') filterReview();
        }

        // Settings
        function openSettings() {
            document.getElementById('serverChanKey').value = serverChanKey;
            document.getElementById('settingsModal').classList.remove('hidden');
        }

        function closeSettings() {
            document.getElementById('settingsModal').classList.add('hidden');
        }

        function saveSettings() {
            serverChanKey = document.getElementById('serverChanKey').value.trim();
            localStorage.setItem('weijia_serverchan', serverChanKey);
            closeSettings();
            alert('è®¾ç½®å·²ä¿å­˜ï¼');
        }

        // Send WeChat notification via Serveré…±
        async function sendNotification(title, content) {
            if (!serverChanKey) return;
            try {
                const url = `https://sctapi.ftqq.com/${serverChanKey}.send`;
                await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                    body: `title=${encodeURIComponent(title)}&desp=${encodeURIComponent(content)}`,
                    mode: 'no-cors' // Serveré…± doesn't support CORS, but the request still goes through
                });
                console.log('Notification sent:', title);
            } catch (e) {
                console.error('Failed to send notification:', e);
            }
        }

        // Load saved data
        function loadData() {
            const savedChallenges = localStorage.getItem('weijia_challenges');
            if (savedChallenges) {
                const parsed = JSON.parse(savedChallenges);
                parsed.forEach((saved, i) => {
                    if (challenges[i]) challenges[i].completed = saved.completed;
                });
            }
            updateStats();
            renderChallenges();
            loadQuestionHistory();
        }

        // Render challenges
        function renderChallenges() {
            const container = document.getElementById('challengeList');
            container.innerHTML = challenges.map((c, i) => `
                <div class="flex items-center p-4 rounded-xl transition-all duration-200 ${c.week === currentWeek ? 'current-week bg-amber-50' : 'bg-gray-50 hover:bg-gray-100'}" 
                     onclick="toggleChallenge(${i})">
                    <div class="w-10 h-10 rounded-full ${c.completed ? 'bg-green-400' : 'bg-gray-200'} flex items-center justify-center mr-4 transition-all duration-300 text-white font-bold">
                        ${c.completed ? 'âœ“' : c.week}
                    </div>
                    <div class="flex-1">
                        <div class="font-bold ${c.completed ? 'text-green-600 line-through' : 'text-gray-700'}">
                            Week ${c.week}: ${c.title}
                        </div>
                        <div class="text-sm text-gray-500">${c.desc}</div>
                    </div>
                    ${c.week === currentWeek ? '<span class="bg-amber-400 text-white text-xs px-2 py-1 rounded-full ml-2">æœ¬å‘¨</span>' : ''}
                </div>
            `).join('');
        }

        // Toggle challenge completion
        function toggleChallenge(index) {
            const wasCompleted = challenges[index].completed;
            challenges[index].completed = !wasCompleted;
            localStorage.setItem('weijia_challenges', JSON.stringify(challenges));
            updateStats();
            renderChallenges();
            
            // Send notification when completing a challenge
            if (!wasCompleted && challenges[index].completed) {
                sendNotification(
                    'ğŸ‰ å”¯å˜‰å®Œæˆäº†ä¸€ä¸ªæŒ‘æˆ˜ï¼',
                    `âœ… Week ${challenges[index].week}: ${challenges[index].title}\n\n${challenges[index].desc}\n\nç»§ç»­åŠ æ²¹ï¼ğŸ’ª`
                );
            }
        }

        // Update stats
        function updateStats() {
            const completed = challenges.filter(c => c.completed).length;
            document.getElementById('challenges').textContent = completed;
            
            const homework = JSON.parse(localStorage.getItem('weijia_homework') || '[]');
            const completedHW = homework.filter(h => h.completed).length;
            document.getElementById('homeworkCount').textContent = completedHW;
            
            const streak = localStorage.getItem('weijia_streak') || '0';
            document.getElementById('streak').textContent = streak;
        }

        // Save question
        function saveQuestion() {
            const textarea = document.getElementById('dailyQuestion');
            const question = textarea.value.trim();
            if (!question) return alert('è¯·å…ˆå†™ä¸‹ä½ çš„é—®é¢˜ï¼');
            
            const questions = JSON.parse(localStorage.getItem('weijia_questions') || '[]');
            questions.unshift({
                text: question,
                date: new Date().toLocaleDateString('zh-CN')
            });
            localStorage.setItem('weijia_questions', JSON.stringify(questions));
            
            // Update streak
            let streak = parseInt(localStorage.getItem('weijia_streak') || '0');
            const lastDate = localStorage.getItem('weijia_last_date');
            const today = new Date().toDateString();
            if (lastDate !== today) {
                streak++;
                localStorage.setItem('weijia_streak', streak);
                localStorage.setItem('weijia_last_date', today);
            }
            
            textarea.value = '';
            updateStats();
            loadQuestionHistory();
            
            // Send notification
            sendNotification(
                'ğŸ’¡ å”¯å˜‰æäº†ä¸€ä¸ªå¥½é—®é¢˜ï¼',
                `â“ ${question}\n\nğŸ“… ${new Date().toLocaleDateString('zh-CN')}`
            );
            
            alert('é—®é¢˜å·²ä¿å­˜ï¼ç»§ç»­ä¿æŒå¥½å¥‡å¿ƒ ğŸŒŸ');
        }

        // Load question history
        function loadQuestionHistory() {
            const questions = JSON.parse(localStorage.getItem('weijia_questions') || '[]');
            const container = document.getElementById('questionHistory');
            if (questions.length === 0) {
                container.innerHTML = '';
                return;
            }
            container.innerHTML = `
                <p class="text-sm text-gray-500 mt-4 mb-2">ğŸ“œ å†å²é—®é¢˜ï¼š</p>
                ${questions.slice(0, 5).map(q => `
                    <div class="bg-purple-50 rounded-lg p-3 text-sm">
                        <span class="text-purple-600">${q.text}</span>
                        <span class="text-gray-400 text-xs ml-2">${q.date}</span>
                    </div>
                `).join('')}
            `;
        }

        // Save teach back
        function saveTeachBack() {
            const textarea = document.getElementById('teachBack');
            const content = textarea.value.trim();
            if (!content) return alert('è¯·å…ˆå†™ä¸‹ä½ å­¦åˆ°çš„å†…å®¹ï¼');
            
            const entries = JSON.parse(localStorage.getItem('weijia_teachback') || '[]');
            entries.unshift({
                text: content,
                date: new Date().toLocaleDateString('zh-CN')
            });
            localStorage.setItem('weijia_teachback', JSON.stringify(entries));
            
            textarea.value = '';
            
            // Send notification
            sendNotification(
                'ğŸ‘©â€ğŸ« å”¯å˜‰å½“å°è€å¸ˆäº†ï¼',
                `ğŸ“ ${content}\n\nğŸ“… ${new Date().toLocaleDateString('zh-CN')}`
            );
            
            alert('å­¦ä¹ ç¬”è®°å·²ä¿å­˜ï¼ä½ æ˜¯æœ€æ£’çš„å°è€å¸ˆ ğŸ‘©â€ğŸ«');
        }

        // Homework functions
        function addHomework() {
            const subject = document.getElementById('hwSubject').value;
            const content = document.getElementById('hwContent').value.trim();
            const dueDate = document.getElementById('hwDueDate').value;
            
            if (!content) return alert('è¯·å¡«å†™ä½œä¸šå†…å®¹ï¼');
            
            const homework = JSON.parse(localStorage.getItem('weijia_homework') || '[]');
            homework.unshift({
                id: Date.now(),
                subject,
                content,
                dueDate,
                completed: false,
                createdAt: new Date().toISOString()
            });
            localStorage.setItem('weijia_homework', JSON.stringify(homework));
            
            document.getElementById('hwContent').value = '';
            document.getElementById('hwDueDate').value = '';
            
            renderHomework();
            updateStats();
            alert('ä½œä¸šå·²æ·»åŠ ï¼');
        }

        function renderHomework() {
            const homework = JSON.parse(localStorage.getItem('weijia_homework') || '[]');
            const pending = homework.filter(h => !h.completed);
            const container = document.getElementById('pendingHomework');
            
            if (pending.length === 0) {
                container.innerHTML = '<p class="text-gray-400 text-center py-8">æš‚æ— å¾…å®Œæˆä½œä¸š âœ¨</p>';
                return;
            }
            
            container.innerHTML = pending.map(h => `
                <div class="homework-card bg-gray-50 rounded-xl p-4">
                    <div class="flex justify-between items-start mb-2">
                        <span class="font-bold text-purple-600">${getSubjectEmoji(h.subject)} ${h.subject}</span>
                        ${h.dueDate ? `<span class="text-sm text-gray-400">æˆªæ­¢: ${h.dueDate}</span>` : ''}
                    </div>
                    <p class="text-gray-700 mb-3">${h.content}</p>
                    <button onclick="completeHomework(${h.id})" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg text-sm transition-all">
                        âœ… å®Œæˆ
                    </button>
                </div>
            `).join('');
        }

        function getSubjectEmoji(subject) {
            const emojis = {
                'è¯­æ–‡': 'ğŸ“–', 'æ•°å­¦': 'ğŸ”¢', 'è‹±è¯­': 'ğŸ”¤', 'ç‰©ç†': 'âš¡',
                'åŒ–å­¦': 'ğŸ§ª', 'ç”Ÿç‰©': 'ğŸŒ¿', 'å†å²': 'ğŸ“œ', 'åœ°ç†': 'ğŸŒ',
                'æ”¿æ²»': 'ğŸ“‹', 'å…¶ä»–': 'ğŸ“Œ'
            };
            return emojis[subject] || 'ğŸ“Œ';
        }

        function completeHomework(id) {
            const homework = JSON.parse(localStorage.getItem('weijia_homework') || '[]');
            const hw = homework.find(h => h.id === id);
            if (hw) {
                hw.completed = true;
                hw.completedAt = new Date().toISOString();
                localStorage.setItem('weijia_homework', JSON.stringify(homework));
                
                // Send notification
                sendNotification(
                    'âœ… å”¯å˜‰å®Œæˆäº†ä½œä¸šï¼',
                    `ğŸ“š ${hw.subject}\nğŸ“ ${hw.content}\n\nå®Œæˆæ—¶é—´: ${new Date().toLocaleString('zh-CN')}\n\nå¤ªæ£’äº†ï¼ç»§ç»­ä¿æŒï¼ğŸ’ª`
                );
            }
            renderHomework();
            updateStats();
            alert('ä½œä¸šå·²å®Œæˆï¼å¤ªæ£’äº†ï¼ğŸ‰');
        }

        function filterReview() {
            const subject = document.getElementById('reviewSubject').value;
            const homework = JSON.parse(localStorage.getItem('weijia_homework') || '[]');
            const completed = homework.filter(h => h.completed && (subject === 'all' || h.subject === subject));
            const container = document.getElementById('reviewList');
            
            if (completed.length === 0) {
                container.innerHTML = '<p class="text-gray-400 text-center py-8">è¯¥ç§‘ç›®æš‚æ— å·²å®Œæˆä½œä¸š ğŸ“</p>';
                return;
            }
            
            container.innerHTML = completed.map(h => `
                <div class="bg-gray-50 rounded-xl p-4 border-l-4 border-green-400">
                    <div class="flex justify-between items-start mb-2">
                        <span class="font-bold text-green-600">${getSubjectEmoji(h.subject)} ${h.subject}</span>
                        <span class="text-sm text-gray-400">${new Date(h.completedAt).toLocaleDateString('zh-CN')}</span>
                    </div>
                    <p class="text-gray-700">${h.content}</p>
                </div>
            `).join('');
        }

        // Initialize
        loadData();
    </script>
</body>
</html>
